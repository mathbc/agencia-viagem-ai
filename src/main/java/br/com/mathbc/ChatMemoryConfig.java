package br.com.mathbc;

import dev.langchain4j.memory.ChatMemory;
import dev.langchain4j.memory.chat.MessageWindowChatMemory;
import dev.langchain4j.store.memory.chat.InMemoryChatMemoryStore;
import jakarta.enterprise.context.ApplicationScoped;
import jakarta.ws.rs.Produces;

@ApplicationScoped
public class ChatMemoryConfig {

    // Produz um bean de ChatMemory para cada nova sessão de chat
    @Produces
    public ChatMemory chatMemory() {
        return MessageWindowChatMemory.builder()
                .maxMessages(20) // Mantém as útlimas 20 mensagens na memória
                .chatMemoryStore(new InMemoryChatMemoryStore())
                .build();
    }
}
